library(tidyverse)
foot <- read_csv("baltimore_foot_traffic.csv")
glimpse(foot)
#1022 results
focus <- foot |>
filter(postal_code == c("21222", "21219","21052", "21226"))
focus |>
count(city) |>
arrange(desc(n))
loser <- focus |>
select(location_name, street_address, dln_visits_yoy, start) |>
filter(start > "2024-03-02") |>
slice_min(dln_visits_yoy, n = 20)
winners <- focus |>
select(location_name, street_address, dln_visits_yoy, start) |>
filter(start > "2024-03-02") |>
filter(dln_visits_yoy > 0) |>
arrange(desc(dln_visits_yoy))
show(winners)
library(kableExtra)
table_output <- loser %>%
kbl(caption = "Baltimore Businesses Losing Customers") %>%
kable_classic(full_width = F, html_font = "Cambria") %>%
column_spec(1, bold = T, border_right = T) %>%
column_spec(2, bold = F, border_right = T) |>
column_spec(3, width = "5em", background = "yellow") |>
column_spec(4, bold = F, border_right = T)
cat("<style>
.caption {
font-size: 30px !important;
}
</style>")
table_output
library(tidyverse)
foot_traffic <- read.csv("../data/foot_traffic_geocode_lookup.csv")
setwd("~/Code/Baltimore/code")
foot_traffic <- read.csv("../data/foot_traffic_geocode_lookup.csv")
getwd()
foot_traffic <- read.csv("foot_traffic_geocode_lookup.csv")
foot_traffic <- read.csv("/Users/robwells/Code/Baltimore/data/foot_traffic_geocode_lookup.csv")
worker <- rio::import("https://docs.google.com/spreadsheets/d/1dpewrgCK18zz6tAUtmtg0rT1sNKLeGcOi2VFMHQyV6c/edit?gid=1336766514#gid=1336766514", which = "Port_Baltimore_Worker_Retention_Program")
View(worker)
View(foot_traffic)
worker <- rio::import("https://docs.google.com/spreadsheets/d/1dpewrgCK18zz6tAUtmtg0rT1sNKLeGcOi2VFMHQyV6c/edit?gid=1336766514#gid=1336766514", which = "Port_Baltimore_Worker_Retention_Program") |>
janitor::clean_names()
worker <- worker |>
mutate(business2 = str_replace_all(business_name, "LLC", ""))
worker <- worker |>
mutate(business2 = tolower(business_name)) |>
mutate(business2 = str_replace_all(business2, "llc", "")) |>
mutate(business2 = str_replace_all(business2, "inc", ""))
worker <- worker |>
mutate(business2 = tolower(business_name)) |>
mutate(business2 = str_replace_all(business2, "llc", "")) |>
mutate(business2 = str_replace_all(business2, "inc", "")) |>
mutate(business2 = gsub("[,.]", "", business2))
foot_traffic <- foot_traffic |>
mutate(business2 = tolower(location_name)) |>
mutate(business2 = str_replace_all(business2, "llc", "")) |>
mutate(business2 = str_replace_all(business2, "inc", "")) |>
mutate(business2 = gsub("[,.]", "", business2))
super_foot <- foot_traffic |>
inner_join(worker, by=c("business2"))
View(super_foot)
worker <- worker |>
mutate(business2 = tolower(business_name)) |>
mutate(business2 = str_squish(business2)) |>
mutate(business2 = str_replace_all(business2, "llc", "")) |>
mutate(business2 = str_replace_all(business2, "inc", "")) |>
mutate(business2 = gsub("[,.]", "", business2))
foot_traffic <- foot_traffic |>
mutate(business2 = tolower(location_name)) |>
mutate(business2 = str_squish(business2)) |>
mutate(business2 = str_replace_all(business2, "llc", "")) |>
mutate(business2 = str_replace_all(business2, "inc", "")) |>
mutate(business2 = gsub("[,.]", "", business2))
super_foot <- foot_traffic |>
inner_join(worker, by=c("business2"))
bol <- read.csv("../data/baltimore_bol.csv") |>
janitor::clean_names() |>
select(company_name,       address_1,          address_2,
city,               state,              zip,                zip4,
latitude,           longitude,          phone,              fax,
website,            email,              employees,          revenue,
contact_formal_name,first_name,
middle,             last_name,          suffix,             title,
last_published_date, classification, ranking_criteria, list_title, company_id, business_info)
bol <- read.csv("../Baltimore/data/baltimore_bol.csv") |>
janitor::clean_names() |>
select(company_name,       address_1,          address_2,
city,               state,              zip,                zip4,
latitude,           longitude,          phone,              fax,
website,            email,              employees,          revenue,
contact_formal_name,first_name,
middle,             last_name,          suffix,             title,
last_published_date, classification, ranking_criteria, list_title, company_id, business_info)
bol <- read.csv("./Baltimore/data/baltimore_bol.csv") |>
janitor::clean_names() |>
select(company_name,       address_1,          address_2,
city,               state,              zip,                zip4,
latitude,           longitude,          phone,              fax,
website,            email,              employees,          revenue,
contact_formal_name,first_name,
middle,             last_name,          suffix,             title,
last_published_date, classification, ranking_criteria, list_title, company_id, business_info)
bol <- read.csv("/Users/robwells/Code/Baltimore/data/baltimore_bol.csv") |>
janitor::clean_names() |>
select(company_name,       address_1,          address_2,
city,               state,              zip,                zip4,
latitude,           longitude,          phone,              fax,
website,            email,              employees,          revenue,
contact_formal_name,first_name,
middle,             last_name,          suffix,             title,
last_published_date, classification, ranking_criteria, list_title, company_id, business_info)
View(bol)
bol <- bol |>
mutate(business2 = tolower(company_name)) |>
mutate(business2 = str_squish(business2)) |>
mutate(business2 = str_replace_all(business2, "llc", "")) |>
mutate(business2 = str_replace_all(business2, "inc", "")) |>
mutate(business2 = gsub("[,.]", "", business2))
super_foot <- bol |>
inner_join(worker, by=c("business2"))
View(super_foot)
